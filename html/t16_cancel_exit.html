<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <title>T16</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="stylesheet" href="../css/style.css">
</head>


<body>
  <h1>T16 - Cancel and exit</h1>
  <p>Open the console <code>(Ctrl-shift-i)</code> to see the messages.</p>
  <script src="../t16_cancel_and_exit.js"></script>
  <div class="w3-container">
    <h1>Java script button</h1>
    <button class="w3 button" type="button" onclick="start();">START</button>

    <div id="output"></div>

  </div>
</body>
</html>
-->
<html>
<head>
  <title>Chocolate Shop</title>
</head>
<body>

  <h1>Welcome to the Chocolate Shop</h1>
  <button onclick="start()">Start</button>
  
  <div id="messageArea"></div>

  <script>
    // Variables
    let userName;
    let userAge;
    const MINAGE = 0;
    const MAXAGE = 130;
    let userAgeIsInvalid = true;
    let pocketMoney;
    let chocArray = ["nothing", "The Mars bar", "The Moro bar", "The King size crunchy", "The Dairy milk block", "The Lindt block"];
    let chocPriceArray = [0, 2, 2.50, 3, 6, 7];
    let chocolate = "nothing";
    let price = 0;

    function start() {
      getUserName();
      if (userName == null) return;

      getUserAge();
      if (userAge == null) return;

      document.getElementById("messageArea").innerHTML += "In the store today we have 5 chocolate bars ranging from 1 - 10 dollars:<br>"
        + chocArray[1] + " for " + chocPriceArray[1] + " dollars.<br>"
        + chocArray[2] + " for " + chocPriceArray[2] + " dollars.<br>"
        + chocArray[3] + " for " + chocPriceArray[3] + " dollars.<br>"
        + chocArray[4] + " for " + chocPriceArray[4] + " dollars.<br>"
        + chocArray[5] + " for " + chocPriceArray[5] + " dollars.<br><br>";

      getPocketMoney();
      if (pocketMoney == null) return;

      pocketMoney = Number(pocketMoney);

      for (let i = 1; i < chocPriceArray.length; i++) {
        if (pocketMoney >= chocPriceArray[i]) {
          chocolate = chocArray[i];
          price = chocPriceArray[i];
        }
      }

      document.getElementById("messageArea").innerHTML +=
        "With the $" + pocketMoney + " you have, you can afford " + chocolate + " for $" + price + ".<br>";
    }

    function getUserName() {
      userName = prompt("What's your name?");
      if (userName == null) return;

      while (userName == "" || userName == " " || !isNaN(userName)) {
        userName = prompt("Invalid! You must enter a valid name please.");
        if (userName == null) return;
      }

      document.getElementById("messageArea").innerHTML += "Welcome " + userName + "!<br>";
    }

    function getUserAge() {
      while (userAgeIsInvalid) {
        userAge = prompt("Please enter your age.");
        if (userAge == null) return;

        if (userAge == "" || userAge == " " || isNaN(userAge) || userAge < MINAGE || userAge > MAXAGE) {
          alert("Invalid! You must enter a valid age between " + MINAGE + " and " + MAXAGE);
        } else {
          userAgeIsInvalid = false;
        }
      }

      document.getElementById("messageArea").innerHTML +=
        "You are " + userAge + " years old, " + userName + ".<br><br>";
    }

    function getPocketMoney() {
      pocketMoney = prompt("How much pocket money do you have, " + userName + "?");
      if (pocketMoney == null) return;

      while (isNaN(pocketMoney) || pocketMoney < 1 || pocketMoney > 10) {
        alert("Invalid! Please enter an amount of pocket money between 1 and 10 dollars.");
        pocketMoney = prompt("How much pocket money do you have, " + userName + "?");
        if (pocketMoney == null) return;
      }
    }
  </script>

</body>
</html>